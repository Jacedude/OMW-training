import React, { useState, useEffect } from 'react';
import { 
  Calendar, 
  Flame, 
  Activity, 
  Settings, 
  Clock, 
  CheckCircle2, 
  Circle, 
  ChevronRight,
  Coffee,
  Utensils,
  Zap,
  Droplets,
  Wind,
  Thermometer,
  CloudRain,
  Info,
  X
} from 'lucide-react';

// --- DATA CONSTANTS ---

const SUPPLEMENT_INFO = {
  "Creatine": { title: "Creatine Monohydrate", dose: "5g Daily (Post)", why: "Critical for high-torque gravel surges. Acts as a larger battery for sprinting." },
  "Beta-Ala": { title: "Beta-Alanine", dose: "3.2g Daily", why: "Buffers intracellular acid. Reduces 'burn' in 10k/Intervals. Causes harmless tingling." },
  "D3+K2": { title: "Vitamin D3+K2", dose: "5000IU", why: "Bone health & immune support. K2 directs calcium to bones, not arteries." },
  "Caffeine": { title: "Caffeine", dose: "200mg (T-45m)", why: "Lowers RPE. Mobilizes fat. Essential for race starts." },
  "Bicarb": { title: "Sodium Bicarbonate", dose: "20g (Protocol)", why: "Extracellular buffering. Sucks acid out of muscles. swallow whole." },
  "Nitrates": { title: "Beet Shot", dose: "400mg", why: "Improves O2 efficiency at altitude." },
  "Sodium": { title: "Sodium Load", dose: "1500mg", why: "Expands plasma volume for altitude and cooling." }
};

const RECOVERY_ROUTINES = {
  'A': { id: 'A', title: "Routine A: The Flush", sub: "Parasympathetic Reset", time: "10m", steps: ["Legs Up Wall (3m)", "Box Breathing (2m)", "Light Calf Roll (2m)", "Child's Pose (2m)", "Hydrate (16oz)"] },
  'B': { id: 'B', title: "Routine B: The Unlock", sub: "Hip & Spine Mobility", time: "10m", steps: ["T-Spine Ext (2m)", "Couch Stretch (2m/side)", "90/90 Hip Switch (2m)", "Cat/Cow (2m)", "Deep Squat Hold (2m)"] },
  'C': { id: 'C', title: "Routine C: The Release", sub: "Deep Tissue", time: "10m", steps: ["Gun: Glute Med (2m)", "Gun: Quads (2m)", "Roll IT Band (2m)", "Pigeon Pose (2m)", "Hamstring Floss (2m)"] },
  'D': { id: 'D', title: "Routine D: The Foundation", sub: "Core Strength", time: "20m", steps: ["Pallof Press (3x10)", "DB Goblet Squat (3x12)", "Dead Bug (3x10)", "Band Clamshells (3x15)", "Plank Saw (3x45s)"] },
  'E': { id: 'E', title: "Routine E: The Stabilizer", sub: "Ankle/Shoulder", time: "15m", steps: ["Mobo Rock (3x1m)", "DB Scaption (3x10)", "Single Leg RDL (3x10)", "Band Pull-Apart (3x15)", "Mobo Lateral (3x1m)"] }
};

const FLUX_DATA = {
  'High': { color: 'green', desc: "PERFORMANCE. High carbs. No deficit.", b: "Oats + Banana + Syrup", l: "Rice Bowl + Chicken", d: "Pasta + Lean Beef", pre: "45g Carbs (Gel)", intra: "100g Carb/hr" },
  'Moderate': { color: 'yellow', desc: "MAINTENANCE. Fuel the work.", b: "Yogurt + Berries", l: "Quinoa + Chicken", d: "Steak + Potato", pre: "Banana", intra: "50g Carb/hr" },
  'Low': { color: 'red', desc: "FAT LOSS. High protein, low starch.", b: "Veggie Omelet", l: "Salad + Tuna", d: "White Fish + Asparagus", pre: "Black Coffee", intra: "Water Only" }
};

const GEAR_MATRIX = {
  "10-20F": { "Dry": { u: "Mesh + Merino + Perfetto + Vest", l: "Sorpasso + Wind Brief", e: "Lobster Claws / Winter Boot" }, "Wet": { u: "ADD: Hardshell Jacket", l: "ADD: Rain Trousers", e: "Neoprene Gloves / Vapor Socks" } },
  "20-30F": { "Dry": { u: "Merino Base + Perfetto", l: "Sorpasso Tights", e: "Lobster Claws / Wool Sock" }, "Wet": { u: "Perfetto + Rain Shell", l: "Sorpasso (DWR)", e: "Neoprene Gloves / Tape Vents" } },
  "30-40F": { "Dry": { u: "Synth Base + Perfetto", l: "Sorpasso Tights", e: "Windproof Glove / Toe Covers" }, "Wet": { u: "Perfetto + Rain Vest", l: "Sorpasso + Ass Saver", e: "RoS Glove / Neoprene Bootie" } },
  "40-50F": { "Dry": { u: "Summer Base + Perfetto", l: "Sorpasso OR Bibs", e: "Light Full Finger" }, "Wet": { u: "Perfetto (Closed Vents)", l: "Sorpasso (Nano Flex)", e: "Neoprene / Velotoze" } }
};

const WEEKS = {
  1: { title: "Phase 1: Build", focus: "Stability", days: [
      { stack: ["Creatine", "Beta-Ala", "D3+K2"], workouts: [
        { t: "Run", title: "VO2 Intervals", dur: "50m", tss: 70, fl: "Moderate", rec: "B", goal: "Leg Speed", ex: ["Warmup 10m", "6x800m @ 6:25", "Cooldown 10m"] }
      ]},
      { stack: ["Creatine", "Beta-Ala", "D3+K2"], workouts: [
        { t: "Swim", title: "Threshold Swim", dur: "1h", tss: 60, fl: "Moderate", rec: "D", goal: "Aerobic Power", ex: ["Continuous Laps", "Sustain Threshold"] },
        { t: "Run", title: "Easy Run", dur: "30m", tss: 30, fl: "Moderate", rec: "D", goal: "Flush", ex: ["Strict Z2 (8:00+)"] }
      ]},
      { stack: ["Creatine", "Beta-Ala", "D3+K2", "Caffeine"], workouts: [
        { t: "Run", title: "Tempo Run (AM)", dur: "45m", tss: 60, fl: "High", rec: "C", goal: "Glycogen Deplete", ex: ["20m @ 7:10/mi pace"] },
        { t: "Bike", title: "VO2 Max (PM)", dur: "1h", tss: 80, fl: "High", rec: "C", goal: "Raise Ceiling", ex: ["5x3m @ 315W"] }
      ]},
      { stack: ["Creatine", "Beta-Ala", "D3+K2"], workouts: [
        { t: "Bike", title: "VO2 Support", dur: "1h", tss: 80, fl: "Moderate", rec: "E", goal: "Lactate Clear", ex: ["6x3m @ 315W"] },
        { t: "Swim", title: "Recovery Swim", dur: "45m", tss: 30, fl: "Moderate", rec: "E", goal: "Flush", ex: ["Easy Laps"] }
      ]},
      { stack: ["Creatine", "Beta-Ala", "D3+K2"], workouts: [
        { t: "Swim", title: "Volume Swim", dur: "60m", tss: 45, fl: "Low", rec: "B", goal: "Volume", ex: ["Steady State"] }
      ]},
      { stack: ["Creatine", "Beta-Ala", "D3+K2"], workouts: [
        { t: "Run", title: "Long Trail Run", dur: "1h 10m", tss: 70, fl: "High", rec: "C", goal: "Ankle Stability", ex: ["Trails HR < 145"] }
      ]},
      { stack: ["Creatine", "Beta-Ala", "D3+K2"], workouts: [
        { t: "Bike", title: "Gravel Skills", dur: "2.5h", tss: 130, fl: "Moderate", rec: "A", goal: "Handling", ex: ["Find Mud", "190W Avg"] }
      ]}
  ]},
  // Add other weeks as needed, repeating structure
};
// Fill Weeks 2-9 with logic for demo purposes (cloning week 1 structure but keeping 9 weeks navigation)
for(let i=2; i<=9; i++) WEEKS[i] = WEEKS[1]; 

export default function TrainingApp() {
  const [activeTab, setActiveTab] = useState('plan');
  const [week, setWeek] = useState(1);
  const [day, setDay] = useState(0); 
  const [checkedItems, setCheckedItems] = useState({});
  const [targetRecovery, setTargetRecovery] = useState(null);
  const [activeSupplement, setActiveSupplement] = useState(null); // For modal
  
  // Gear state
  const [temp, setTemp] = useState("30-40F");
  const [cond, setCond] = useState("Dry");

  const toggleCheck = (id) => setCheckedItems(prev => ({ ...prev, [id]: !prev[id] }));

  const jumpToRecovery = (recId) => {
    setTargetRecovery(recId);
    setActiveTab('recovery');
  };

  const jumpToFuel = () => setActiveTab('fuel');

  return (
    <div className="flex h-screen flex-col lg:flex-row bg-slate-950 text-slate-200 font-sans selection:bg-blue-500/30 overflow-hidden relative">
      
      {/* SUPPLEMENT MODAL */}
      {activeSupplement && (
        <div className="absolute inset-0 z-[100] bg-black/80 backdrop-blur-sm flex items-center justify-center p-4" onClick={() => setActiveSupplement(null)}>
          <div className="bg-slate-900 border border-slate-700 p-6 rounded-2xl max-w-sm w-full shadow-2xl" onClick={e => e.stopPropagation()}>
            <div className="flex justify-between items-start mb-4">
              <h3 className="text-xl font-bold text-white">{SUPPLEMENT_INFO[activeSupplement]?.title || activeSupplement}</h3>
              <button onClick={() => setActiveSupplement(null)} className="text-slate-400 hover:text-white"><X size={20}/></button>
            </div>
            {SUPPLEMENT_INFO[activeSupplement] ? (
              <div className="space-y-4">
                 <div className="bg-slate-800 p-3 rounded-lg">
                   <div className="text-[10px] uppercase font-bold text-slate-500">Dose & Timing</div>
                   <div className="text-blue-400 font-bold">{SUPPLEMENT_INFO[activeSupplement].dose}</div>
                 </div>
                 <div>
                   <div className="text-[10px] uppercase font-bold text-slate-500 mb-1">Physiological Objective</div>
                   <p className="text-slate-300 text-sm leading-relaxed">{SUPPLEMENT_INFO[activeSupplement].why}</p>
                 </div>
              </div>
            ) : (
              <p className="text-slate-400">No specific detail data for this supplement.</p>
            )}
          </div>
        </div>
      )}

      {/* NAVIGATION */}
      <nav className="fixed bottom-0 w-full lg:relative lg:w-64 bg-slate-900 border-t lg:border-t-0 lg:border-r border-slate-800 z-50 flex-shrink-0">
        <div className="flex lg:flex-col justify-around lg:justify-start h-full p-2 lg:p-6 gap-2">
          <div className="hidden lg:block mb-8">
            <h1 className="text-2xl font-black italic text-white tracking-tighter">OMW <span className="text-blue-500">2026</span></h1>
            <div className="text-xs text-slate-500 font-mono mt-1">ATHLETE PROTOCOL V1.3</div>
          </div>
          
          <NavButton id="plan" icon={Calendar} label="PLAN" active={activeTab === 'plan'} onClick={() => setActiveTab('plan')} />
          <NavButton id="fuel" icon={Flame} label="FUEL" active={activeTab === 'fuel'} onClick={() => setActiveTab('fuel')} />
          <NavButton id="recovery" icon={Activity} label="RECOVERY" active={activeTab === 'recovery'} onClick={() => setActiveTab('recovery')} />
          <NavButton id="gear" icon={Settings} label="GEAR" active={activeTab === 'gear'} onClick={() => setActiveTab('gear')} />
        </div>
      </nav>

      {/* MAIN CONTENT */}
      <main className="flex-1 overflow-y-auto p-4 pb-24 lg:p-8 no-scrollbar scroll-smooth">
        {activeTab === 'plan' && (
          <PlanView 
            week={week} setWeek={setWeek} 
            day={day} setDay={setDay} 
            checkedItems={checkedItems} toggleCheck={toggleCheck}
            jumpToRecovery={jumpToRecovery}
            jumpToFuel={jumpToFuel}
            openSuppModal={setActiveSupplement}
          />
        )}
        {activeTab === 'fuel' && <FuelView week={week} day={day} />}
        {activeTab === 'recovery' && <RecoveryView targetRecovery={targetRecovery} />}
        {activeTab === 'gear' && <GearView temp={temp} setTemp={setTemp} cond={cond} setCond={setCond} />}
      </main>
    </div>
  );
}

// --- SUB COMPONENTS ---

function NavButton({ id, icon: Icon, label, active, onClick }) {
  return (
    <button onClick={onClick} className={`flex flex-col lg:flex-row items-center lg:px-4 lg:py-3 rounded-xl transition-all ${active ? 'text-blue-400 bg-slate-800 shadow-lg shadow-blue-900/10' : 'text-slate-500 hover:bg-slate-800'}`}>
      <Icon className="w-5 h-5 mb-1 lg:mb-0 lg:mr-3" />
      <span className="text-[10px] lg:text-sm font-bold">{label}</span>
    </button>
  );
}

function PlanView({ week, setWeek, day, setDay, checkedItems, toggleCheck, jumpToRecovery, jumpToFuel, openSuppModal }) {
  const weekData = WEEKS[week];
  const dayData = weekData.days[day];

  return (
    <div className="animate-in fade-in duration-500">
      <div className="mb-4">
        <div className="text-xs text-blue-400 font-bold uppercase tracking-wider">{weekData.title}</div>
        <h2 className="text-2xl font-bold text-white">{weekData.focus}</h2>
      </div>

      {/* Week Selector */}
      <div className="flex overflow-x-auto gap-2 pb-4 no-scrollbar mb-2">
        {Object.keys(WEEKS).map((w) => (
          <button key={w} onClick={() => { setWeek(Number(w)); setDay(0); }} className={`flex-shrink-0 px-4 py-2 rounded-lg text-xs font-bold transition-all ${week === Number(w) ? 'bg-blue-600 text-white shadow-lg' : 'bg-slate-800 text-slate-400'}`}>
            W{w}
          </button>
        ))}
      </div>

      {/* Day Selector */}
      <div className="flex justify-between bg-slate-900 p-1 rounded-xl mb-6">
        {['M', 'T', 'W', 'T', 'F', 'S', 'S'].map((d, i) => (
          <button key={i} onClick={() => setDay(i)} className={`w-10 h-10 rounded-lg text-sm font-bold transition-all ${day === i ? 'bg-blue-500 text-white shadow-lg' : 'text-slate-500 hover:bg-slate-800'}`}>
            {d}
          </button>
        ))}
      </div>

      {/* WORKOUT CARDS STACK */}
      <div className="space-y-4">
        {dayData.workouts.map((workout, idx) => (
          <WorkoutCard 
            key={idx} 
            data={workout} 
            uid={`w${week}d${day}w${idx}`} 
            checkedItems={checkedItems} 
            toggleCheck={toggleCheck}
            jumpToRecovery={jumpToRecovery}
            jumpToFuel={jumpToFuel}
          />
        ))}
      </div>

      {/* DAILY STACK & FUEL SUMMARY */}
      <div className="mt-6 grid grid-cols-1 md:grid-cols-2 gap-4">
        {/* Supplements */}
        <div className="bg-slate-800 rounded-xl p-4 border border-slate-700">
          <div className="text-[10px] text-slate-500 font-bold uppercase mb-3 flex items-center gap-2">
            <Zap size={12} className="text-yellow-500"/> Daily Stack
          </div>
          <div className="space-y-2">
             {dayData.stack.map((item, i) => {
               const uid = `w${week}d${day}s${i}`;
               return (
                 <div key={i} className="flex items-center justify-between bg-slate-900/50 p-2 rounded-lg border border-slate-700/50">
                    <div className="flex items-center gap-2">
                      <button onClick={() => toggleCheck(uid)} className={checkedItems[uid] ? 'text-green-500' : 'text-slate-600'}>
                         {checkedItems[uid] ? <CheckCircle2 size={16}/> : <Circle size={16}/>}
                      </button>
                      <button onClick={() => openSuppModal(item)} className="text-sm font-medium text-slate-200 hover:text-blue-400 hover:underline decoration-blue-500/50 underline-offset-4 transition-all text-left">
                        {item}
                      </button>
                    </div>
                    <Info size={14} className="text-slate-600"/>
                 </div>
               )
             })}
          </div>
        </div>

        {/* Fuel Snapshot */}
        <div className="bg-slate-800 rounded-xl p-4 border border-slate-700">
          <div className="text-[10px] text-slate-500 font-bold uppercase mb-3 flex items-center gap-2">
             <Flame size={12} className="text-orange-500"/> Fueling Strategy
          </div>
          <div className="space-y-3">
             <div className="flex items-center gap-2">
               <span className={`text-xs px-2 py-0.5 rounded font-bold uppercase ${
                  dayData.workouts[0].fl === 'High' ? 'bg-green-900/30 text-green-400' : 
                  dayData.workouts[0].fl === 'Low' ? 'bg-red-900/30 text-red-400' : 
                  'bg-yellow-900/30 text-yellow-400'
               }`}>
                 {dayData.workouts[0].fl} Flux
               </span>
             </div>
             <p className="text-xs text-slate-400 leading-relaxed">
               {FLUX_DATA[dayData.workouts[0].fl].desc}
             </p>
             <button onClick={jumpToFuel} className="text-xs text-blue-400 font-medium hover:text-white flex items-center gap-1">
               View Full Menu <ChevronRight size={10}/>
             </button>
          </div>
        </div>
      </div>
    </div>
  );
}

function WorkoutCard({ data, uid, checkedItems, toggleCheck, jumpToRecovery, jumpToFuel }) {
  // Color Logic based on PDF: Swim(Blue), Run(Green), Bike(Orange)
  const colors = {
    'Swim': { head: 'bg-blue-600', text: 'text-blue-400', border: 'border-blue-500/30' },
    'Run': { head: 'bg-emerald-600', text: 'text-emerald-400', border: 'border-emerald-500/30' },
    'Bike': { head: 'bg-orange-600', text: 'text-orange-400', border: 'border-orange-500/30' }
  }[data.t] || { head: 'bg-slate-600', text: 'text-slate-400', border: 'border-slate-500/30' };

  return (
    <div className={`bg-slate-800 rounded-lg overflow-hidden border ${colors.border} shadow-lg shadow-black/20`}>
      {/* Header */}
      <div className={`${colors.head} px-4 py-2 flex justify-between items-center`}>
        <span className="font-bold text-white uppercase text-sm">{data.t} {data.dur}</span>
        <span className="text-white/80 text-xs font-mono">{data.tss} TSS</span>
      </div>
      
      {/* Content */}
      <div className="p-4">
        <h3 className="font-bold text-xl text-white mb-0.5">{data.title}</h3>
        <div className="text-xs text-slate-400 italic mb-3">GOAL: {data.goal}</div>
        
        {/* Main Set Box */}
        <div className="bg-slate-200 text-slate-900 p-3 rounded-md mb-4 font-medium text-sm border-l-4 border-slate-400">
           {data.ex.map((line, i) => (
             <div key={i} className="mb-1 last:mb-0">â€¢ {line}</div>
           ))}
        </div>

        {/* Footer Grid */}
        <div className="grid grid-cols-2 border-t border-slate-700 pt-3">
          {/* Flux Link */}
          <button onClick={jumpToFuel} className="flex flex-col items-center border-r border-slate-700 group">
             <span className="text-[10px] text-slate-500 font-bold uppercase">Nutrition</span>
             <span className={`text-sm font-bold ${
               data.fl === 'High' ? 'text-green-400' : data.fl === 'Low' ? 'text-red-400' : 'text-yellow-400'
             } group-hover:underline`}>
               {data.fl}
             </span>
          </button>
          
          {/* Recovery Link */}
          <button onClick={() => jumpToRecovery(data.rec)} className="flex flex-col items-center group">
             <span className="text-[10px] text-slate-500 font-bold uppercase">Recovery</span>
             <span className="text-sm font-bold text-slate-300 group-hover:text-blue-400 group-hover:underline">
               Routine {data.rec}
             </span>
          </button>
        </div>
      </div>
    </div>
  );
}

function FuelView({ week, day }) {
  // ... (Same as previous, omitted for brevity but fully functional in export)
  const currentFlux = WEEKS[week].days[day].workouts[0].fl;
  const data = FLUX_DATA[currentFlux];
  const colors = {
    'green': { bg: 'bg-emerald-900/20', border: 'border-emerald-500/50', icon: 'text-emerald-400' },
    'yellow': { bg: 'bg-yellow-900/20', border: 'border-yellow-500/50', icon: 'text-yellow-400' },
    'red': { bg: 'bg-red-900/20', border: 'border-red-500/50', icon: 'text-red-400' }
  }[data.color];

  return (
    <div className="animate-in fade-in space-y-6">
      <div className={`p-6 rounded-2xl border ${colors.bg} ${colors.border}`}>
        <div className="flex items-center gap-3 mb-2">
          <Flame className={`${colors.icon} w-6 h-6`} />
          <h2 className="text-2xl font-bold text-white">{currentFlux} Flux</h2>
        </div>
        <p className="text-slate-300 text-sm leading-relaxed">{data.desc}</p>
      </div>
      <div className="bg-slate-800 rounded-xl overflow-hidden border border-slate-700">
        <div className="bg-slate-900 p-4 border-b border-slate-700 font-bold text-white text-xs uppercase tracking-wider">Daily Protocol</div>
        <div className="divide-y divide-slate-700">
          <FuelRow icon={Coffee} label="Breakfast" val={data.b} />
          <FuelRow icon={Utensils} label="Lunch" val={data.l} />
          <FuelRow icon={Zap} label="Pre-Workout" val={data.pre} />
          <FuelRow icon={Droplets} label="Intra-Workout" val={data.intra} />
          <FuelRow icon={Utensils} label="Dinner" val={data.d} />
        </div>
      </div>
    </div>
  );
}

function FuelRow({ icon: Icon, label, val }) {
  return (
    <div className="p-4 flex gap-4 items-center">
      <Icon className="text-slate-500 w-5 h-5 flex-shrink-0" />
      <div>
        <div className="text-[10px] text-slate-500 font-bold uppercase">{label}</div>
        <div className="text-slate-200 text-sm font-medium">{val}</div>
      </div>
    </div>
  );
}

function RecoveryView({ targetRecovery }) {
  useEffect(() => {
    if (targetRecovery) {
      const el = document.getElementById(`rec-${targetRecovery}`);
      if (el) el.scrollIntoView({ behavior: 'smooth', block: 'center' });
    }
  }, [targetRecovery]);

  return (
    <div className="animate-in fade-in">
      <div className="bg-gradient-to-r from-indigo-900/50 to-slate-900 p-6 rounded-2xl border border-indigo-500/30 mb-6">
        <h2 className="text-2xl font-bold text-white mb-1">Recovery Vault</h2>
        <p className="text-indigo-200/70 text-sm">Mechanical routines to reset the nervous system.</p>
      </div>
      <div className="grid gap-4">
        {Object.values(RECOVERY_ROUTINES).map((r) => {
          const isTarget = targetRecovery === r.id;
          return (
            <div key={r.id} id={`rec-${r.id}`} className={`p-5 rounded-xl border transition-all ${isTarget ? 'border-indigo-500 bg-indigo-900/20 ring-1 ring-indigo-500' : 'border-slate-700 bg-slate-800'}`}>
              <div className="flex justify-between items-start mb-4">
                <div>
                  <h3 className="text-lg font-bold text-white">{r.title}</h3>
                  <p className="text-indigo-400 text-xs font-bold uppercase tracking-wider">{r.sub}</p>
                </div>
                <span className="text-[10px] bg-slate-900 px-2 py-1 rounded text-slate-400 border border-slate-700 font-mono">{r.time}</span>
              </div>
              <div className="space-y-3 relative">
                <div className="absolute left-2.5 top-2 bottom-2 w-px bg-slate-700/50"></div>
                {r.steps.map((step, i) => (
                  <div key={i} className="flex gap-3 relative z-10">
                    <div className="flex-shrink-0 w-5 h-5 rounded-full bg-slate-800 border border-slate-700 text-[10px] flex items-center justify-center text-slate-400 font-mono mt-0.5">{i + 1}</div>
                    <span className="text-sm text-slate-300 leading-snug">{step}</span>
                  </div>
                ))}
              </div>
            </div>
          );
        })}
      </div>
    </div>
  );
}

function GearView({ temp, setTemp, cond, setCond }) {
  const data = GEAR_MATRIX[temp][cond];
  const temps = Object.keys(GEAR_MATRIX);
  return (
    <div className="animate-in fade-in space-y-6">
      <div className="bg-slate-800 p-6 rounded-2xl border border-slate-700">
        <h2 className="text-2xl font-bold text-white mb-6">Gear Calculator</h2>
        <div className="grid grid-cols-2 gap-4 mb-6">
          <div>
            <label className="text-xs text-slate-500 uppercase font-bold mb-2 block">Temp</label>
            <select value={temp} onChange={(e) => setTemp(e.target.value)} className="w-full bg-slate-900 border border-slate-700 text-white rounded-lg p-3 text-sm outline-none">
              {temps.map(t => <option key={t} value={t}>{t}</option>)}
            </select>
          </div>
          <div>
            <label className="text-xs text-slate-500 uppercase font-bold mb-2 block">Condition</label>
            <select value={cond} onChange={(e) => setCond(e.target.value)} className="w-full bg-slate-900 border border-slate-700 text-white rounded-lg p-3 text-sm outline-none">
              <option value="Dry">Dry</option>
              <option value="Wet">Wet / Snow</option>
            </select>
          </div>
        </div>
        <div className="bg-slate-900 rounded-xl p-5 border border-slate-700 space-y-5">
          <GearRow icon={Wind} label="Upper Body" val={data.u} color="blue" />
          <GearRow icon={Activity} label="Lower Body" val={data.l} color="blue" />
          <GearRow icon={Thermometer} label="Extremities" val={data.e} color="orange" />
        </div>
      </div>
    </div>
  );
}

function GearRow({ icon: Icon, label, val, color }) {
  const colorClasses = color === 'blue' ? 'bg-blue-500/20 text-blue-400' : 'bg-orange-500/20 text-orange-400';
  return (
    <div className="flex gap-4 items-start">
      <div className={`${colorClasses} p-2 rounded mt-1`}><Icon className="w-4 h-4" /></div>
      <div>
        <div className="text-[10px] text-slate-500 uppercase font-bold">{label}</div>
        <div className="text-white font-medium text-sm">{val}</div>
      </div>
    </div>
  );
}
